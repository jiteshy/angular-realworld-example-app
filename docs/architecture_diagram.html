<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Angular RealWorld - Architecture Diagram</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body,
      html {
        width: 100vw;
        height: 100vh;
        overflow: hidden;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
      }

      .container {
        display: flex;
        flex-direction: column;
        width: 100vw;
        height: 100vh;
      }

      .header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 12px 20px;
        text-align: center;
        flex-shrink: 0;
      }

      .header h1 {
        font-size: 1.4em;
        margin-bottom: 4px;
        font-weight: 600;
      }

      .header p {
        font-size: 0.9em;
        opacity: 0.9;
      }

      .zoom-controls {
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: #f8f9fa;
        padding: 8px 20px;
        border-bottom: 1px solid #dee2e6;
        flex-shrink: 0;
      }

      .status-message {
        font-size: 12px;
        font-weight: 500;
      }

      .status-positive {
        color: #000;
      }

      .status-negative {
        color: #dc3545;
      }

      .zoom-controls-group {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .usage-hint {
        font-size: 11px;
        color: #6c757d;
        margin-right: 8px;
      }

      .zoom-buttons {
        display: flex;
        gap: 4px;
      }

      .zoom-btn {
        background: #fff;
        border: 1px solid #ccc;
        border-radius: 4px;
        padding: 4px 8px;
        font-size: 11px;
        cursor: pointer;
        transition: all 0.2s;
      }

      .zoom-btn:hover {
        background: #f8f9fa;
        border-color: #adb5bd;
      }

      .zoom-btn:active {
        background: #e9ecef;
      }

      #diagram {
        flex: 1;
        position: relative;
        overflow: auto;
        background: #fafafa;
      }

      .zoom-level-indicator {
        position: absolute;
        top: 10px;
        left: 10px;
        background: rgba(0, 0, 0, 0.7);
        color: white;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 11px;
        z-index: 1000;
        pointer-events: none;
      }

      .diagram-container {
        display: inline-block;
        margin: 0 auto;
        transform-origin: center center;
        transition: transform 0.3s ease;
      }

      .mermaid {
        background: white;
        border-radius: 4px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        margin: 20px;
      }

      .legend {
        background: #fff;
        border-top: 1px solid #dee2e6;
        padding: 10px;
        max-height: 100px;
        overflow-y: auto;
        flex-shrink: 0;
      }

      .legend-grid {
        display: grid;
        grid-template-columns: repeat(6, 1fr);
        gap: 6px;
      }

      .legend-item {
        display: flex;
        align-items: center;
        padding: 4px;
        border-radius: 3px;
        font-size: 11px;
      }

      .legend-color {
        width: 12px;
        height: 12px;
        border-radius: 2px;
        margin-right: 6px;
      }

      /* Legend Colors */
      .ui-color {
        background-color: #e1f5fe;
        border: 1px solid #0277bd;
      }
      .feature-color {
        background-color: #f3e5f5;
        border: 1px solid #7b1fa2;
      }
      .service-color {
        background-color: #e8f5e8;
        border: 1px solid #2e7d32;
      }
      .http-color {
        background-color: #fff3e0;
        border: 1px solid #f57c00;
      }
      .external-color {
        background-color: #ffebee;
        border: 1px solid #d32f2f;
      }
      .shared-color {
        background-color: #f1f8e9;
        border: 1px solid #558b2f;
      }
      .tech-color {
        background-color: #e3f2fd;
        border: 1px solid #1976d2;
      }
      .warning-color {
        background-color: #fff8e1;
        border: 1px solid #ff8f00;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>Angular RealWorld Example App - Architecture</h1>
        <p>System Architecture Diagram</p>
      </div>

      <div class="zoom-controls">
        <div class="status-message status-positive">
          Click components to view source files on GitHub
        </div>
        <div class="zoom-controls-group">
          <span class="usage-hint"
            >Use Ctrl/Cmd + mouse wheel or keyboard (+/- keys) to zoom</span
          >
          <div class="zoom-buttons">
            <button class="zoom-btn" onclick="zoomIn()">+ Zoom In</button>
            <button class="zoom-btn" onclick="zoomOut()">- Zoom Out</button>
            <button class="zoom-btn" onclick="resetZoom()">Reset</button>
          </div>
        </div>
      </div>

      <div id="diagram">
        <div class="zoom-level-indicator" id="zoomIndicator">25%</div>
        <div class="diagram-container">
          <div class="mermaid">
            flowchart TD %% User Interface Layer subgraph UILayer ["üé® User
            Interface Layer"] App["App Component<br />(Root)"] Header["Header
            Component<br />(Navigation)"] Footer["Footer Component<br />(Footer)"]
            end %% Feature Components subgraph Features ["üöÄ Feature
            Components"] subgraph ArticleFeature ["üì∞ Article Feature"]
            Home["Home Component<br />(Article List)"] ArticleDetail["Article
            Component<br />(Article View)"] Editor["Editor Component<br />(‚ö†Ô∏è
            CRUD Bug)"] ArticleList["Article List Component<br />(List
            Display)"] ArticleMeta["Article Meta Component<br />(Author Info)"]
            end subgraph ProfileFeature ["üë§ Profile Feature"] Profile["Profile
            Component<br />(User Profile)"] ProfileArticles["Profile Articles<br />(User
            Articles)"] ProfileFavorites["Profile Favorites<br />(Liked
            Articles)"] end subgraph AuthFeature ["üîê Auth Feature"] Auth["Auth
            Component<br />(Login/Register)"] Settings["Settings Component<br />(User
            Settings)"] end end %% Service Layer subgraph Services ["‚öôÔ∏è Service
            Layer"] UserService["User Service<br />(BehaviorSubject State)"]
            ArticleService["Article Service<br />(CRUD Operations)"]
            ProfileService["Profile Service<br />(User Profiles)"]
            JwtService["JWT Service<br />(Token Management)"]
            CommentsService["Comments Service<br />(Comments CRUD)"]
            TagsService["Tags Service<br />(Tag Management)"] end %% HTTP Layer
            subgraph HTTPLayer ["üåê HTTP Layer"] HttpClient["Angular
            HttpClient<br />(HTTP Requests)"] subgraph Interceptors ["üîå
            Interceptors"] APIInterceptor["API Interceptor<br />(Base URL)"]
            TokenInterceptor["Token Interceptor<br />(JWT Headers)"]
            ErrorInterceptor["Error Interceptor<br />(Error Handling)"] end end
            %% External API subgraph External ["üåç External Services"]
            RealWorldAPI["RealWorld API<br />(api.realworld.io)"]
            LocalStorage["Browser LocalStorage<br />(JWT Token)"] end %% Shared
            Components subgraph Shared ["üîß Shared Components"] ListErrors["List
            Errors Component<br />(Error Display)"] MarkdownPipe["Markdown
            Pipe<br />(Marked.js)"] FavoriteButton["Favorite Button<br />(UI
            Only)"] FollowButton["Follow Button<br />(UI Only)"] end %%
            Technology Stack subgraph TechStack ["üìö Technology Stack"]
            Angular["Angular 20.0.0<br />(Standalone Components)"]
            TypeScript["TypeScript 5.8.3<br />(Language)"] RxJS["RxJS 7.4.0<br />(Reactive
            Programming)"] Bootstrap["Bootstrap<br />(Styling)"]
            Marked["Marked.js<br />(Markdown)"] end %% Data Flow Connections App
            --> Header App --> Footer %% Feature to Service Connections Home -->
            ArticleService ArticleDetail --> ArticleService ArticleDetail -->
            CommentsService Editor --> ArticleService Profile --> ProfileService
            Auth --> UserService Settings --> UserService %% Service to HTTP
            Connections UserService --> HttpClient ArticleService --> HttpClient
            ProfileService --> HttpClient CommentsService --> HttpClient
            TagsService --> HttpClient JwtService --> LocalStorage %% HTTP Layer
            Flow HttpClient --> APIInterceptor APIInterceptor -->
            TokenInterceptor TokenInterceptor --> ErrorInterceptor
            ErrorInterceptor --> RealWorldAPI %% Shared Component Usage Auth -->
            ListErrors Settings --> ListErrors ArticleDetail --> MarkdownPipe
            Home --> FavoriteButton Profile --> FollowButton %% State Management
            UserService -.->|"Observable State"| Auth UserService
            -.->|"Observable State"| Header UserService -.->|"Observable State"|
            Settings %% Click Events for GitHub Navigation click App href
            "https://github.com/jiteshy/angular-realworld-example-app/blob/main/src/app/app.component.ts"
            _blank click Header href
            "https://github.com/jiteshy/angular-realworld-example-app/blob/main/src/app/core/layout/header.component.ts"
            _blank click Footer href
            "https://github.com/jiteshy/angular-realworld-example-app/blob/main/src/app/core/layout/footer.component.ts"
            _blank click Home href
            "https://github.com/jiteshy/angular-realworld-example-app/blob/main/src/app/features/article/pages/home/home.component.ts"
            _blank click ArticleDetail href
            "https://github.com/jiteshy/angular-realworld-example-app/blob/main/src/app/features/article/pages/article/article.component.ts"
            _blank click Editor href
            "https://github.com/jiteshy/angular-realworld-example-app/blob/main/src/app/features/article/pages/editor/editor.component.ts"
            _blank click Profile href
            "https://github.com/jiteshy/angular-realworld-example-app/blob/main/src/app/features/profile/pages/profile/profile.component.ts"
            _blank click Auth href
            "https://github.com/jiteshy/angular-realworld-example-app/blob/main/src/app/core/auth/auth.component.ts"
            _blank click Settings href
            "https://github.com/jiteshy/angular-realworld-example-app/blob/main/src/app/features/settings/settings.component.ts"
            _blank click UserService href
            "https://github.com/jiteshy/angular-realworld-example-app/blob/main/src/app/core/auth/services/user.service.ts"
            _blank click ArticleService href
            "https://github.com/jiteshy/angular-realworld-example-app/blob/main/src/app/features/article/services/articles.service.ts"
            _blank click ProfileService href
            "https://github.com/jiteshy/angular-realworld-example-app/blob/main/src/app/features/profile/services/profile.service.ts"
            _blank click JwtService href
            "https://github.com/jiteshy/angular-realworld-example-app/blob/main/src/app/core/auth/services/jwt.service.ts"
            _blank click CommentsService href
            "https://github.com/jiteshy/angular-realworld-example-app/blob/main/src/app/features/article/services/comments.service.ts"
            _blank click TagsService href
            "https://github.com/jiteshy/angular-realworld-example-app/blob/main/src/app/features/article/services/tags.service.ts"
            _blank click APIInterceptor href
            "https://github.com/jiteshy/angular-realworld-example-app/blob/main/src/app/core/interceptors/api.interceptor.ts"
            _blank click TokenInterceptor href
            "https://github.com/jiteshy/angular-realworld-example-app/blob/main/src/app/core/interceptors/token.interceptor.ts"
            _blank click ErrorInterceptor href
            "https://github.com/jiteshy/angular-realworld-example-app/blob/main/src/app/core/interceptors/error.interceptor.ts"
            _blank click ListErrors href
            "https://github.com/jiteshy/angular-realworld-example-app/blob/main/src/app/shared/components/list-errors.component.ts"
            _blank click MarkdownPipe href
            "https://github.com/jiteshy/angular-realworld-example-app/blob/main/src/app/shared/pipes/markdown.pipe.ts"
            _blank %% Color Coding classDef uiComponent
            fill:#e1f5fe,stroke:#0277bd,stroke-width:2px classDef
            featureComponent fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
            classDef service fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px
            classDef http fill:#fff3e0,stroke:#f57c00,stroke-width:2px classDef
            external fill:#ffebee,stroke:#d32f2f,stroke-width:2px classDef
            shared fill:#f1f8e9,stroke:#558b2f,stroke-width:2px classDef tech
            fill:#e3f2fd,stroke:#1976d2,stroke-width:2px classDef warning
            fill:#fff8e1,stroke:#ff8f00,stroke-width:3px class App,Header,Footer
            uiComponent class
            Home,ArticleDetail,Profile,Auth,Settings,ArticleList,ArticleMeta,ProfileArticles,ProfileFavorites
            featureComponent class
            UserService,ArticleService,ProfileService,JwtService,CommentsService,TagsService
            service class
            HttpClient,APIInterceptor,TokenInterceptor,ErrorInterceptor http
            class RealWorldAPI,LocalStorage external class
            ListErrors,MarkdownPipe,FavoriteButton,FollowButton shared class
            Angular,TypeScript,RxJS,Bootstrap,Marked tech class Editor warning
          </div>
        </div>
      </div>

      <div class="legend">
        <div class="legend-grid">
          <div class="legend-item">
            <div class="legend-color ui-color"></div>
            <span>UI Components</span>
          </div>
          <div class="legend-item">
            <div class="legend-color feature-color"></div>
            <span>Feature Components</span>
          </div>
          <div class="legend-item">
            <div class="legend-color service-color"></div>
            <span>Services</span>
          </div>
          <div class="legend-item">
            <div class="legend-color http-color"></div>
            <span>HTTP Layer</span>
          </div>
          <div class="legend-item">
            <div class="legend-color external-color"></div>
            <span>External Services</span>
          </div>
          <div class="legend-item">
            <div class="legend-color shared-color"></div>
            <span>Shared Components</span>
          </div>
          <div class="legend-item">
            <div class="legend-color tech-color"></div>
            <span>Technology Stack</span>
          </div>
          <div class="legend-item">
            <div class="legend-color warning-color"></div>
            <span>‚ö†Ô∏è Issues Found</span>
          </div>
        </div>
      </div>
    </div>

    <script>
      let zoomLevel = 0.25;
      const minZoom = 0.15;
      const maxZoom = 3;
      const zoomStep = 0.25;

      function updateZoom() {
        const container = document.querySelector(".diagram-container");
        const indicator = document.getElementById("zoomIndicator");

        container.style.transform = `scale(${zoomLevel})`;
        indicator.textContent = `${Math.round(zoomLevel * 100)}%`;
      }

      function zoomIn() {
        if (zoomLevel < maxZoom) {
          zoomLevel = Math.min(maxZoom, zoomLevel + zoomStep);
          updateZoom();
        }
      }

      function zoomOut() {
        if (zoomLevel > minZoom) {
          zoomLevel = Math.max(minZoom, zoomLevel - zoomStep);
          updateZoom();
        }
      }

      function resetZoom() {
        zoomLevel = 0.25;
        updateZoom();
        setTimeout(centerDiagram, 100);
      }

      function centerDiagram() {
        const diagramEl = document.getElementById("diagram");
        diagramEl.scrollLeft =
          (diagramEl.scrollWidth - diagramEl.clientWidth) / 2;
        diagramEl.scrollTop =
          (diagramEl.scrollHeight - diagramEl.clientHeight) / 2;
      }

      // Keyboard support
      document.addEventListener("keydown", function (e) {
        // Don't interfere if user is typing in an input
        if (e.target.tagName === "INPUT" || e.target.tagName === "TEXTAREA") {
          return;
        }

        if (e.key === "+" || e.key === "=") {
          e.preventDefault();
          zoomIn();
        } else if (e.key === "-") {
          e.preventDefault();
          zoomOut();
        } else if (e.key === "0") {
          e.preventDefault();
          resetZoom();
        }
      });

      // Mouse wheel support with Ctrl/Cmd modifier
      document
        .getElementById("diagram")
        .addEventListener("wheel", function (e) {
          if (e.ctrlKey || e.metaKey) {
            e.preventDefault();

            if (e.deltaY < 0) {
              zoomIn();
            } else {
              zoomOut();
            }
          }
        });

      // Initialize Mermaid with securityLevel loose for GitHub links
      mermaid.initialize({
        startOnLoad: true,
        theme: "default",
        flowchart: {
          useMaxWidth: false,
          htmlLabels: true,
        },
        securityLevel: "loose",
      });

      // Initialize zoom and center diagram after page load
      window.addEventListener("load", function () {
        updateZoom();
        setTimeout(centerDiagram, 500);
      });
    </script>
  </body>
</html>
